<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>AS399X Firmware: tuner.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AS399X Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tuner.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="global_8h_source.html">global.h</a>&quot;</code><br/>
</div>
<p><a href="tuner_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtuner_params.html">tunerParams</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2568b99271c70a2c527818a47c7f823f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#a2568b99271c70a2c527818a47c7f823f">TUNER_Cin</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a2568b99271c70a2c527818a47c7f823f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2abd138bec3417d80739b575d90eff19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#a2abd138bec3417d80739b575d90eff19">TUNER_Clen</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a2abd138bec3417d80739b575d90eff19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0094bd0761c4275f71c9958bd31368f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#ab0094bd0761c4275f71c9958bd31368f">TUNER_Cout</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ab0094bd0761c4275f71c9958bd31368f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac20492a254d42440a672d0f3402bbf54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#ac20492a254d42440a672d0f3402bbf54">tunerInit</a> (void)</td></tr>
<tr class="separator:ac20492a254d42440a672d0f3402bbf54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd4f2dcdf57dd2ba8fc073200cf34d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#abbd4f2dcdf57dd2ba8fc073200cf34d3">tunerSetCap</a> (<a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> component, <a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> val)</td></tr>
<tr class="separator:abbd4f2dcdf57dd2ba8fc073200cf34d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa68ef96d81ae9dd3015e847be5c05d3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#aa68ef96d81ae9dd3015e847be5c05d3c">tunerOneHillClimb</a> (struct <a class="el" href="structtuner_params.html">tunerParams</a> *p, u16 maxSteps)</td></tr>
<tr class="separator:aa68ef96d81ae9dd3015e847be5c05d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a362ee9bfe4c4619f7c8818a5ffc8becc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#a362ee9bfe4c4619f7c8818a5ffc8becc">tunerMultiHillClimb</a> (struct <a class="el" href="structtuner_params.html">tunerParams</a> *res)</td></tr>
<tr class="separator:a362ee9bfe4c4619f7c8818a5ffc8becc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0a7275bf7e9ac89011e7709a00d0ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#a5f0a7275bf7e9ac89011e7709a00d0ff">tunerTraversal</a> (struct <a class="el" href="structtuner_params.html">tunerParams</a> *res)</td></tr>
<tr class="separator:a5f0a7275bf7e9ac89011e7709a00d0ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af86ab841063530c01fb8325b52def6e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#af86ab841063530c01fb8325b52def6e0">tunerSetTuning</a> (<a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> cin, <a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> clen, <a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a> cout)</td></tr>
<tr class="separator:af86ab841063530c01fb8325b52def6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a77d7d9a80aa54986f808758e06f4fd"><td class="memItemLeft" align="right" valign="top">u16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tuner_8h.html#a1a77d7d9a80aa54986f808758e06f4fd">tunerGetReflected</a> (void)</td></tr>
<tr class="separator:a1a77d7d9a80aa54986f808758e06f4fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides declarations for tuner related functions. </p>
<dl class="section author"><dt>Author</dt><dd>Ulrich Herrmann </dd>
<dd>
Bernhard Breinbauer </dd></dl>

<p>Definition in file <a class="el" href="tuner_8h_source.html">tuner.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a2568b99271c70a2c527818a47c7f823f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TUNER_Cin&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>used in <a class="el" href="tuner_8h.html#abbd4f2dcdf57dd2ba8fc073200cf34d3">tunerSetCap()</a> to select the tuner network component. </p>

<p>Definition at line <a class="el" href="tuner_8h_source.html#l00036">36</a> of file <a class="el" href="tuner_8h_source.html">tuner.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2abd138bec3417d80739b575d90eff19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TUNER_Clen&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>used in <a class="el" href="tuner_8h.html#abbd4f2dcdf57dd2ba8fc073200cf34d3">tunerSetCap()</a> to select the tuner network component. </p>

<p>Definition at line <a class="el" href="tuner_8h_source.html#l00038">38</a> of file <a class="el" href="tuner_8h_source.html">tuner.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab0094bd0761c4275f71c9958bd31368f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TUNER_Cout&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>used in <a class="el" href="tuner_8h.html#abbd4f2dcdf57dd2ba8fc073200cf34d3">tunerSetCap()</a> to select the tuner network component. </p>

<p>Definition at line <a class="el" href="tuner_8h_source.html#l00040">40</a> of file <a class="el" href="tuner_8h_source.html">tuner.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1a77d7d9a80aa54986f808758e06f4fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u16 tunerGetReflected </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Measures the reflected power by utilizing <a class="el" href="as399x_8c.html#a068783ac66684d83d08fbcbace1b4276">as399xGetReflectedPower()</a> and <a class="el" href="as399x_8c.html#af6dd4bda420c70ccbb64b355bf6bb9fb">as399xGetReflectedPowerNoiseLevel()</a>. This function is used by the automatic tuning algorithms to find the tuner setting with the lowest reflected power. </p>
<dl class="section return"><dt>Returns</dt><dd>Reflected power measured with the current tuner settings. </dd></dl>

</div>
</div>
<a class="anchor" id="ac20492a254d42440a672d0f3402bbf54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tunerInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the tuner caps to value 0. This function requires an already set-up SPI communication (see <a class="el" href="as399x__com_8h.html#a6305d3b6e2bbab54bca14afc97db3c5c">initInterface()</a> in <a class="el" href="serialinterface_8c.html" title="Implementation of serial interface communication with AS399x. ">serialinterface.c</a>). </p>

</div>
</div>
<a class="anchor" id="a362ee9bfe4c4619f7c8818a5ffc8becc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tunerMultiHillClimb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtuner_params.html">tunerParams</a> *&#160;</td>
          <td class="paramname"><em>res</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sophisticated automatic tuning function. This function tries to find an optimized tuner setting (minimal reflected power). The function splits the 3-dimensional tuner-setting-space (axis are Cin, Clen and Cout) into segments and searches in each segment (by using <a class="el" href="tuner_8h.html#aa68ef96d81ae9dd3015e847be5c05d3c">tunerOneHillClimb()</a>) for its local minimum of reflected power. The tuner setting (point in tuner-setting-space) which has the lowest reflected power is returned in parameter res. This function has a much higher probability to find the tuner setting with the lowest reflected power than <a class="el" href="tuner_8h.html#aa68ef96d81ae9dd3015e847be5c05d3c">tunerOneHillClimb()</a> but on the other hand takes much longer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">res</td><td>Struct which contains the found tuning optimum. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa68ef96d81ae9dd3015e847be5c05d3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tunerOneHillClimb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtuner_params.html">tunerParams</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>maxSteps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Simple automatic tuning function. This function tries to find an optimized tuner setting (minimal reflected power). The function starts at the current tuner setting and modifies the tuner caps until a setting with a minimum of reflected power is found. When changing the tuner further leads to an increase of reflected power the algorithm stops. Note that, although the algorithm has been optimized to not immediately stop at local minima of reflected power, it still might not find the tuner setting with the lowest reflected power. The algorithm of <a class="el" href="tuner_8h.html#aa68ef96d81ae9dd3015e847be5c05d3c">tunerOneHillClimb()</a> is probably producing better results, but it is slower. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Struct which contains the found tuning optimum. </td></tr>
    <tr><td class="paramname">maxSteps</td><td>Number of maximum steps which should be performed when searching for tuning optimum. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abbd4f2dcdf57dd2ba8fc073200cf34d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tunerSetCap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td>
          <td class="paramname"><em>component</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the tuner cap associated with component to the value val. The value val is the register value of the tuner cap (not a real Farad value). The maximum value of val depends on the used component on the board. For the PE64904 the maximum value is 31. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">component</td><td>The tuner cap which should be changed. Allowed values are: <a class="el" href="tuner_8h.html#a2568b99271c70a2c527818a47c7f823f">TUNER_Cin</a>, <a class="el" href="tuner_8h.html#a2abd138bec3417d80739b575d90eff19">TUNER_Clen</a>, <a class="el" href="tuner_8h.html#ab0094bd0761c4275f71c9958bd31368f">TUNER_Cout</a>. </td></tr>
    <tr><td class="paramname">val</td><td>The register value which will be written to the selected tuner cap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af86ab841063530c01fb8325b52def6e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tunerSetTuning </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td>
          <td class="paramname"><em>cin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td>
          <td class="paramname"><em>clen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="as399x__config_8h.html#aed742c436da53c1080638ce6ef7d13de">u8</a>&#160;</td>
          <td class="paramname"><em>cout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Applies the values cin, clen and cout to the tuner network. The parameter values are register values of the associated components not values in Farad. The maximum value of val depends on the used component on the board. For the PE64904 the maximum value is 31. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cin</td><td>Value which is applied to cap Cin of the tuner network. </td></tr>
    <tr><td class="paramname">clen</td><td>Value which is applied to cap Clen of the tuner network. </td></tr>
    <tr><td class="paramname">cout</td><td>Value which is applied to cap Cout of the tuner network. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5f0a7275bf7e9ac89011e7709a00d0ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tunerTraversal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtuner_params.html">tunerParams</a> *&#160;</td>
          <td class="paramname"><em>res</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exhaustive automatic tuning function. This function tries to find an optimized tuner setting (minimal reflected power). The function applies each and every possible tuner setting and returns the setting with the lowest value of reflected power in parameter res. This algorithm ensures that the optimum tuner setting is found but takes a very long time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">res</td><td>Struct which contains the found tuning optimum. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 2 2013 10:18:03 for AS399X Firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
